<mvc:View controllerName="gestionempleados.controller.VerEmpleados"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:suite="sap.suite.ui.commons"
	xmlns:upload="sap.m.upload" 
>
        <SplitApp id="splitAppEmployee">
		<masterPages>
			<Page showHeader="false">
				<Toolbar class="sapUiTinyMarginTop">
					<Button icon="sap-icon://nav-back" press="onPressBack"></Button>
					<SearchField liveChange="onSearchEmployee" width="100%" />
				</Toolbar>
				   <core:Fragment fragmentName="gestionempleados.fragment.ListEmpleado" type="XML"/>

			</Page>
		</masterPages>
		<detailPages>
			<Page id="detailSelectEmployee" showHeader="false">
				<FlexBox alignItems="Center" justifyContent="Center" height="100%">
					<Text text="{i18n>seleccioneEmpleado}"></Text>
				</FlexBox>
			</Page>
			<Page
				id="detailEmployee"
				title="{i18n>detalleEmpleado}">
				<ObjectHeader
					icon= "{= ${odataModelZEmployees>Type}==='0' ? 'sap-icon://employee-pane' : ${odataModelZEmployees>Type}==='1' ? 'sap-icon://employee' : 'sap-icon://leads' }"
					title="{odataModelZEmployees>FirstName} {odataModelZEmployees>LastName}"
					intro="{odataModelZEmployees>Dni}"
					class="sapUiResponsivePadding--header"
					responsive="true">
						<ObjectAttribute title="{i18n>lblFechaIncorporacion}" text="{ path:'odataModelZEmployees>CreationDate', type:'sap.ui.model.type.Date'}" />
						<ObjectAttribute title="{i18n>lblTipoEmpleado}" text="{= ${odataModelZEmployees>Type} === '0' ? ${i18n>interno} : ${odataModelZEmployees>Type} === '1' ? ${i18n>autonomo} : ${i18n>gerente}}" />
						<ObjectAttribute title="{i18n>lblComentario}" text="{odataModelZEmployees>Comments}" />
				</ObjectHeader>
				<IconTabBar
					class="sapUiResponsiveContentPadding">
					<items>
						<IconTabFilter
							design="Horizontal"
							icon="sap-icon://attachment"
							text="{i18n>lblFichero}">

							 <upload:UploadSet
                    id="uploadCollection"
                    maxFileNameLength="100"
                    maxFileSize="100"
                    multiple="true"
                    sameFilenameAllowed="true"
                    instantUpload="true"
                    uploadUrl="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments"
					 items="{odataModelZEmployees>UserToAttachment}"
                    
                    afterItemRemoved="onFileDeleted"
					noDataDescription="{i18n>Arrastrarficheros}"
					uploadEnabled="true">

						<upload:toolbar>
				<OverflowToolbar>
					<ToolbarSpacer/>

						<Button
							id="uploadSelectedButton"
							text="{i18n>subirArchivo}"
							press="onFileUpload"/>
					
					<Button
							id="downloadSelectedButton"
							text="{i18n>DescargarArchivo}"
							press="downloadFile"/>
					
					<upload:UploadSetToolbarPlaceholder />
				</OverflowToolbar>
			</upload:toolbar>

					 <upload:items>
                                   	<upload:UploadSetItem                                       
                                        visibleEdit="false"
                                        fileName="{odataModelZEmployees>DocName}"
										mediaType="{odataModelZEmployees>MimeType}"
										openPressed = "downloadFile"
										url="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments/"
                                        >
                                    </upload:UploadSetItem>
                                </upload:items>

								</upload:UploadSet>

							
						</IconTabFilter>
						<IconTabFilter
							icon="sap-icon://money-bills"
							design="Horizontal"
							text="{i18n>historial}">
							<suite:Timeline
								enableDoubleSided="true"
								groupByType="Year"
								groupBy="CreationDate"
								showHeaderBar="false"
								enableScroll="true"
								height="100%"
								showIcons="true"
								growingThreshold="0"
								sortOldestFirst="true"
								content="{odataModelZEmployees>UserToSalary}">
								<suite:content>
									<suite:TimelineItem
										userName="{parts:[{path:'odataModelZEmployees>Amount'},{path:'odataModelZEmployees>Waers'}],
												type: 'sap.ui.model.type.Currency',
												formatOptions: {showMeasure: false}}"
										icon="sap-icon://circle-task"
										text="{odataModelZEmployees>Comments}"
										dateTime="{odataModelZEmployees>CreationDate}">
									</suite:TimelineItem>
								</suite:content>
							</suite:Timeline>
						</IconTabFilter>
					</items>
				</IconTabBar>
				<footer>
					<Toolbar>
						<ToolbarSpacer></ToolbarSpacer>
						<Button text="{i18n>darDeBaja}" press="onDeleteEmployee"></Button>
						<Button text="{i18n>ascender}" press="onOpenDialog"></Button>
					</Toolbar>
					
				</footer>
			</Page>
		</detailPages>
	</SplitApp>
        
</mvc:View>
